{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["export function proxy (vm, data, key) {\n\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[data][key]\n    },\n    set (val) {\n      vm[data][key] = val\n    }\n  })\n}\n\nexport function defineProperty (target, key, value) {\n  Object.defineProperty(target, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}\nexport const LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed'\n]\nconst strats = {}\n\nLIFECYCLE_HOOKS.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nfunction mergeHook (parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal)\n    } else {\n      return [childVal]\n    }\n  }\n}\n\nexport function mergeOptions (parent, child) {\n  const options = {}\n  for (let key in parent) {\n    mergeField(key)\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  function mergeField (key) {\n    if (strats[key]) {\n      options[key] = strats[key](parent[key], child[key])\n    } else {\n      options[key] = child[key]\n    }\n  }\n  return options\n}\n\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook]\n  if (handlers) {\n    handlers.forEach(handler => {\n      handler.call(vm)\n    })\n  }\n}","const oldArrayProtoMethods = Array.prototype\n\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\nmethods.forEach(method => {\n  arrayMethods[method] = function(...args) {\n    const result = oldArrayProtoMethods[method].apply(this, args)\n    let inserted\n    let ob = this.__ob__ // this指向的是调用着，也就是数组类型的data，在Observer包装data的时候，就初始化来__ob__给data， 所以这个data有__ob__属性， 指向的是Observer, 就有observeArray的方法来\n    switch (method) {\n      case 'push': // arr.push({a:1},{b:2})\n      case 'unshift': //这两个方法都是追加 追加的内容可能是对象类型，应该被再次进行劫持\n          inserted = args;\n          break;\n      case 'splice': // vue.$set原理\n          inserted = args.slice(2); // arr.splice(0,1,{a:1},{a:1},{a:1})\n      default:\n          break;\n    }\n    if(inserted) ob.observeArray(inserted); // 给数组新增的值也要进行观测\n    ob.dep.notify()\n    return result\n  }\n})","// depend依赖, 收集依赖的\nlet id = 0\nclass Dep {\n  constructor () {\n    this.subs = []\n    this.id = id++\n  }\n  // 建立关联，依赖关系\n  depend () {\n    Dep.target.addDep(this)\n  }\n  // 往中介添加\n  addSub (watcher) {\n    this.subs.push(watcher)\n  }\n  // 通知\n  notify () {\n    this.subs.forEach(watcher => watcher.update())\n  }\n}\nDep.target = null;\nexport function pushTarget (watcher) {\n  Dep.target = watcher\n}\n\nexport function popTarget () {\n  Dep.target = null\n}\nexport default Dep","import { defineProperty } from \"../util\";\nimport { arrayMethods } from \"./array\";\nimport Dep from './dep'\n\nexport function observe(data) {\n  if(typeof data !== 'object' || data == null){\n      return;\n  }\n  if(data.__ob__){\n      return data;\n  }\n  return new Observer(data) // 包装data\n}\n\nclass Observer {\n  constructor (data) {\n    this.dep = new Dep()\n    defineProperty(data, '__ob__', this)\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      this.observeArray(data)\n    }\n    this.walk(data)\n  }\n  walk(data) {\n    const keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  observeArray (data) {\n    for(let i = 0; i < data.length;i++) {\n      observe(data[i])\n    }\n  }\n}\nfunction defineReactive(data, key, value) {\n  let valueObserver = observe(value)\n  const dep = new Dep()\n  Object.defineProperty(data, key, {\n    get () {\n      if (Dep.target) {\n        dep.addSub(Dep.target)\n        if (valueObserver) {\n          valueObserver.dep.addSub(Dep.target)\n        }\n      }\n      return value\n    },\n    set (newValue) {\n      if(newValue === value) return;\n      observe(newValue)\n      value = newValue\n      dep.notify()\n    }\n  })\n}","import { proxy } from \"./util\"\nimport { observe } from \"./observer/index\"\n\nexport function initState(vm) {\n  const opt = vm.$options\n  if (opt.props) {\n    initProps(vm)\n  }\n  if (opt.data) {\n    initData(vm)\n  }\n}\nfunction initProps(){}\nfunction initData(vm) { // 数据初始化\n  let data = vm.$options.data\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}","\n\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // </my:xx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的    aaa=\"aaa\"  a='aaa'   a=aaa\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >    >   <div></div>  <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n// 数据结构 树、栈、链表、队列、\nexport function parseHTML(html) {\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName, // 标签名\n            type: 1, // 元素类型\n            children: [], // 孩子列表\n            attrs, // 属性集合\n            parent: null // 父元素\n        }\n    }\n    let root;\n    let currentParent;\n    let stack = [];\n    function start(tagName, attrs) { // 创建一个元素 作为根元素\n        let element = createASTElement(tagName, attrs);\n        if(!root){\n            root = element;\n        }\n        currentParent = element; // 当前解析的标签 保存起来\n        stack.push(element); // 将生产的ast元素放到栈中\n    }\n\n    // <div> <p></p> hello</div>    currentParent=p\n    function end(tagName) { // 在结尾标签处 创建父子关系\n        let element = stack.pop(); // 取出栈中的最后一个\n        currentParent = stack[stack.length-1];\n        if(currentParent){ // 在闭合时可以知道这个标签的父亲是谁\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.trim();\n        if(text){\n            currentParent.children.push({\n                type:3,\n                text\n            })\n        }\n    }\n\n    while (html) { // 只要html不为空字符串就一直解析\n        let textEnd = html.indexOf('<');\n        if (textEnd == 0) {\n            // 肯定是标签\n            const startTagMatch = parseStartTag(); // 开始标签匹配的结果 处理开始\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) { // 处理结束标签\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]); // 将结束标签传入\n                continue;\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 是处理文本\n            text = html.substring(0, textEnd)\n        }\n        if (text) { // 处理文本\n            advance(text.length);\n            chars(text);\n        }\n\n    }\n\n    function advance(n) { // 将字符串进行截取操作 在更新html内容\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length); // 删除开始标签\n            // 如果直接是闭合标签了 说明没有属性\n            let end, attr;\n            // 不是结尾标签 能匹配到属性\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n                advance(attr[0].length); // 去掉当前属性\n            }\n            if (end) { // >  删除匹配到的结束标签\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n\n    return root;\n}\n","// 编写<div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\n\n// 结果:render(){\n//    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v('hello')))\n//}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n//  语法层面的转义\nfunction genProps(attrs) { //  id   \"app\"     / style  \"fontSize:12px;color:red\"\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0,-1)}}`;\n}\nfunction gen(node) {\n    if (node.type == 1) {\n        return generate(node); // 生产元素节点的字符串\n    } else {\n        let text = node.text; // 获取文本\n        // 如果是普通文本 不带{{}}\n\n        if(!defaultTagRE.test(text)){\n            return `_v(${JSON.stringify(text)})` // _v('hello {{ name }} world {{msg}} aa')   => _v('hello'+_s(name) +'world' + _s(msg))\n        }\n        let tokens = []; // 存放每一段的代码\n        let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次使用前置为0\n        let match,index; // 每次匹配到的结果\n\n        while(match = defaultTagRE.exec(text)){\n            index = match.index; // 保存匹配到的索引\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index+match[0].length;\n        }\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction genChildren(el) {\n    const children = el.children;\n    if (children) { // 将所有转化后的儿子用逗号拼接起来\n        return children.map(child => gen(child)).join(',')\n    }\n}\nexport function generate(el) {\n    let children = genChildren(el);// 儿子的生成\n    let code = `_c('${el.tag}',${\n        el.attrs.length? `${genProps(el.attrs)}`:'undefined'\n    }${\n        children?`,${children}`:''\n    })`;\n    return code;\n}\n","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\nexport function compileToFunctions (template) {\n  // return template\n  // 1. 将template转成ast树， 这样做的目的是，用js对象更方便后续操作\n  let ast = parseHTML(template)\n  /* console.log(ast)\n    {\n      attrs: (2) [{…}, {…}]\n      children: (3) [{…}, {…}, {…}]\n      parent: null\n      tag: \"div\"\n      type: 1\n    }\n  */\n  // 2. 优化静态节点\n  // 3. 用ast生成code, 主要是用vue的的方法去包装成code，\n  // 这样在render函数执行时，会用vue原型上的方法去编译render函数\n  let code = generate(ast);\n  // _c('div',{id:\"app\",style:{\"color\":\"red\"}},_c('p',undefined,_v(\"hello world zf\")),_c('li',undefined,_v(_s(school.name))),_c('li',undefined,_v(_s(school.age))))\n  // console.log(code);\n  // 4. 通过new Function + with的方式，生成render函数\n  let render = new Function(`with(this){return ${code}}`)\n  /*\n    with 的用法\n    https://blog.csdn.net/zwkkkk1/article/details/79725934\n  */\n  return render\n}\n","export function patch(oldVnode,vnode){\n\n  // oldVnode => id#app   vnode 我们根据模板产生的虚拟dom\n\n  // 将虚拟节点转化成真实节点\n  let el = createElm(vnode); // 产生真实的dom \n  let parentElm = oldVnode.parentNode; // 获取老的app的父亲 =》 body\n\n  parentElm.insertBefore(el,oldVnode.nextSibling); // 当前的真实元素插入到app的后面\n  parentElm.removeChild(oldVnode); // 删除老的节点\n\n  return el;\n\n}\n\nfunction createElm(vnode){\n  let {tag,children,key,data,text} = vnode;\n  if(typeof tag == 'string'){ // 创建元素 放到vnode.el上\n      vnode.el = document.createElement(tag);\n\n      // 只有元素才有属性\n      updateProperties(vnode);\n      children.forEach(child=>{ // 遍历儿子 将儿子渲染后的结果扔到父亲中\n          vnode.el.appendChild(createElm(child));\n      })\n  }else{ // 创建文件 放到vnode.el上\n      vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n// vue 的渲染流程 =》 先初始化数据 =》 将模板进行编译 =》 render函数 =》 生成虚拟节点 =》 生成真实的dom  =》 扔到页面上\n\n\nfunction updateProperties(vnode){\n  let el = vnode.el;\n  let newProps = vnode.data || {};\n  for(let key in newProps){\n      if(key == 'style'){ // {color:red}\n          for(let styleName in newProps.style){\n              el.style[styleName] = newProps.style[styleName]\n          }\n      }else if(key == 'class'){\n          el.className = el.class;\n      }else{\n          el.setAttribute(key,newProps[key]);\n      }\n  }\n}","// 观察者.js\nimport { pushTarget, popTarget } from \"./dep\";\nclass Watcher {\n  constructor (vm, exprOrFn, cb, options) {\n    this.deps = [] // watcher记录有多少dep依赖他\n    this.depsId = new Set()\n    this.vm = vm\n    this.exprOrFn = exprOrFn\n    this.cb = cb\n    this.options = options\n    if (typeof exprOrFn === 'function') {\n      this.getter = exprOrFn\n    }\n    this.value = this.get()\n  }\n  get () {\n    pushTarget(this)\n    let result = this.getter()\n    popTarget()\n    return result\n  }\n\n  addDep (dep) {\n    let id = dep.id\n    if (!this.depsId.has(id)) {\n      this.deps.push(dep)\n      this.depsId.add(id)\n      dep.addSub(this)\n    }\n  }\n  run () {\n    this.get()\n  }\n  update () {\n    this.run()\n  }\n}\n\nexport default Watcher\n","import { patch } from \"./vdom/patch\";\nimport { callHook } from \"./util\";\nimport Watcher from './observer/watcher'\nexport function lifeCycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n    console.log(vm.$el)\n    // 用新的创建的元素 替换老的vm.$el\n    vm.$el = patch(vm.$el,vnode)\n  }\n}\n\nexport function mountComponent (vm, el) {\n  vm.$el = el;\n  // 调用render方法去渲染 el属性\n  // 先调用render方法创建虚拟节点，在将虚拟节点渲染到页面上\n  callHook(vm,'beforeMount')\n  let updateComponent = ()=>{\n      vm._update(vm._render()); // 渲染 、 更新\n  }\n  // 这个watcher是用于渲染的 目前没有任何功能  updateComponent()\n\n  // 初始化就会创建watcher\n  let watcher = new Watcher(vm,updateComponent,()=>{\n      callHook(vm,'updated')\n  },true); // 渲染watcher 只是个名字\n\n  // 要把属性 和 watcher绑定在一起 \n  \n  callHook(vm,'mounted');\n}\n","import { initState } from \"./state\"\nimport { compileToFunctions } from \"./compiler/index\"\nimport { mountComponent } from \"./lifecycle\";\nimport { mergeOptions, callHook } from \"./util\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this // 实例\n    // 要把全局的合并一起\n    vm.$options = mergeOptions(vm.constructor.options, options) // 属性挂在实例的$options\n    callHook(vm, 'beforeCreate')\n    initState(vm)\n    callHook(vm, 'created')\n    if(vm.$options.el){\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    console.log('el', el)\n    vm.$el = el;\n    if(!options.render){\n      // 没render 将template转化成render方法\n      let template = options.template;\n      if(!template && el){\n          template = el.outerHTML;\n      }\n      // 编译原理 将模板编译成render函数\n      const render = compileToFunctions(template);\n      options.render = render\n    }\n    // 都解析成render函数之后，挂载组件\n    mountComponent(vm,el);\n  }\n}\n","export function renderMixin(Vue) { // 用对象来描述dom的解构\n  Vue.prototype._c = function() { // 创建虚拟dom元素\n      return createElement(...arguments);\n  }\n\n  // 1.当结果是对象时 会对这个对象取值\n  Vue.prototype._s = function(val) { // stringify\n      return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n  }\n  Vue.prototype._v = function(text) { // 创建虚拟dom文本元素\n      return createTextVnode(text);\n  }\n  Vue.prototype._render = function() { // _render = render\n      const vm = this;\n      const render = vm.$options.render;\n      let vnode = render.call(vm);\n      return vnode;\n  }\n}\n// _c('div',{},_v(),_c())\nfunction createElement(tag,data={},...children){\n return vnode(tag,data,data.key,children)\n}\nfunction createTextVnode(text){\n  return vnode(undefined,undefined,undefined,undefined,text);\n}\n// 用来产生虚拟dom的,操作真实dom浪费性能\nfunction vnode(tag,data,key,children,text){\n  return {\n      tag,\n      data,\n      key,\n      children,\n      text,\n  }\n}","import { mergeOptions } from \"../util\"\n\n// 全局api\nexport function initGlobalApi (Vue) {\n  Vue.options = {}\n  // 要将mixin合并到去全局配置中\n  Vue.mixin = function(mixin) {\n    this.options = mergeOptions(this.options, mixin)\n  }\n}","import { initMixin } from \"./init.js\"\nimport { renderMixin } from \"./vdom/index\";\nimport { lifeCycleMixin } from \"./lifecycle.js\";\nimport { initGlobalApi } from \"./global-api/index.js\";\n\nfunction Vue (options) {\n  this._init(options)\n}\ninitGlobalApi(Vue)\ninitMixin(Vue)\nlifeCycleMixin(Vue)\nrenderMixin(Vue)\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","val","target","value","enumerable","configurable","LIFECYCLE_HOOKS","strats","forEach","hook","mergeHook","parentVal","childVal","concat","mergeOptions","parent","child","options","mergeField","hasOwnProperty","callHook","handlers","$options","handler","call","oldArrayProtoMethods","Array","prototype","arrayMethods","create","methods","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","addDep","watcher","push","update","pushTarget","popTarget","observe","Observer","isArray","__proto__","walk","keys","defineReactive","i","length","valueObserver","addSub","newValue","initState","opt","props","initData","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","root","currentParent","stack","start","element","end","pop","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","join","genChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","Watcher","exprOrFn","cb","deps","depsId","Set","getter","has","add","run","lifeCycleMixin","Vue","_update","console","log","$el","mountComponent","updateComponent","_render","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","_v","createTextVnode","undefined","initGlobalApi","mixin"],"mappings":"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"}