{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["export function proxy (vm, data, key) {\n\n  Object.defineProperty(vm, key, {\n    get () {\n      return vm[data][key]\n    },\n    set (val) {\n      vm[data][key] = val\n    }\n  })\n}\n\nexport function defineProperty (target, key, value) {\n  Object.defineProperty(target, key, {\n    enumerable: false,\n    configurable: false,\n    value\n  })\n}","const oldArrayProtoMethods = Array.prototype\n\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\nmethods.forEach(method => {\n  arrayMethods[method] = function(...args) {\n    const result = arrayMethods[method].apply(this, args)\n    let inserted\n    let ob = this.__ob__ // this指向的是调用着，也就是数组类型的data，在Observer包装data的时候，就初始化来__ob__给data， 所以这个data有__ob__属性， 指向的是Observer, 就有observeArray的方法来\n    switch (method) {\n      case 'push': // arr.push({a:1},{b:2})\n      case 'unshift': //这两个方法都是追加 追加的内容可能是对象类型，应该被再次进行劫持\n          inserted = args;\n          break;\n      case 'splice': // vue.$set原理\n          inserted = args.slice(2); // arr.splice(0,1,{a:1},{a:1},{a:1})\n      default:\n          break;\n    }\n    if(inserted) ob.observeArray(inserted); // 给数组新增的值也要进行观测\n    return result\n  }\n})","import { defineProperty } from \"../util\";\nimport { arrayMethods } from \"./array\";\n\nexport function observe(data) {\n  if(typeof data !== 'object' || data == null){\n      return data;\n  }\n  if(data.__ob__){\n      return data;\n  }\n  return new Observer(data) // 包装data\n}\n\nclass Observer {\n  constructor (data) {\n    defineProperty(data, '__ob__', this)\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      this.observeArray(data)\n    }\n    this.walk(data)\n  }\n  walk(data) {\n    const keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  observeArray (data) {\n    for(let i = 0; i < data.length;i++) {\n      observe(data[i])\n    }\n  }\n}\nfunction defineReactive(data, key, value) {\n  observe(value)\n  Object.defineProperty(data, key, {\n    get () {\n      return value\n    },\n    set (newValue) {\n      if(newValue === value) return;\n      observe(newValue)\n      value = newValue\n    }\n  })\n}","import { proxy } from \"./util\"\nimport { observe } from \"./observer/index\"\n\nexport function initState(vm) {\n  const opt = vm.$options\n  if (opt.props) {\n    initProps(vm)\n  }\n  if (opt.data) {\n    initData(vm)\n  }\n}\nfunction initProps(){}\nfunction initData(vm) { // 数据初始化\n  let data = vm.$options.data\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}","\n\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // </my:xx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的    aaa=\"aaa\"  a='aaa'   a=aaa\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >    >   <div></div>  <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n// 数据结构 树、栈、链表、队列、\nexport function parseHTML(html) {\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName, // 标签名\n            type: 1, // 元素类型\n            children: [], // 孩子列表\n            attrs, // 属性集合\n            parent: null // 父元素\n        }\n    }\n    let root;\n    let currentParent;\n    let stack = [];\n    function start(tagName, attrs) { // 创建一个元素 作为根元素\n        let element = createASTElement(tagName, attrs);\n        if(!root){\n            root = element;\n        }\n        currentParent = element; // 当前解析的标签 保存起来\n        stack.push(element); // 将生产的ast元素放到栈中\n    }\n\n    // <div> <p></p> hello</div>    currentParent=p\n    function end(tagName) { // 在结尾标签处 创建父子关系\n        let element = stack.pop(); // 取出栈中的最后一个\n        currentParent = stack[stack.length-1];\n        if(currentParent){ // 在闭合时可以知道这个标签的父亲是谁\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.trim();\n        if(text){\n            currentParent.children.push({\n                type:3,\n                text\n            })\n        }\n    }\n\n    while (html) { // 只要html不为空字符串就一直解析\n        let textEnd = html.indexOf('<');\n        if (textEnd == 0) {\n            // 肯定是标签\n            const startTagMatch = parseStartTag(); // 开始标签匹配的结果 处理开始\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) { // 处理结束标签\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]); // 将结束标签传入\n                continue;\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 是处理文本\n            text = html.substring(0, textEnd)\n        }\n        if (text) { // 处理文本\n            advance(text.length);\n            chars(text);\n        }\n\n    }\n\n    function advance(n) { // 将字符串进行截取操作 在更新html内容\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length); // 删除开始标签\n            // 如果直接是闭合标签了 说明没有属性\n            let end, attr;\n            // 不是结尾标签 能匹配到属性\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n                advance(attr[0].length); // 去掉当前属性\n            }\n            if (end) { // >  删除匹配到的结束标签\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n\n    return root;\n}\n","// 编写<div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\n\n// 结果:render(){\n//    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v('hello')))\n//}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n//  语法层面的转义\nfunction genProps(attrs) { //  id   \"app\"     / style  \"fontSize:12px;color:red\"\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理\n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0,-1)}}`;\n}\nfunction gen(node) {\n    if (node.type == 1) {\n        return generate(node); // 生产元素节点的字符串\n    } else {\n        let text = node.text; // 获取文本\n        // 如果是普通文本 不带{{}}\n\n        if(!defaultTagRE.test(text)){\n            return `_v(${JSON.stringify(text)})` // _v('hello {{ name }} world {{msg}} aa')   => _v('hello'+_s(name) +'world' + _s(msg))\n        }\n        let tokens = []; // 存放每一段的代码\n        let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次使用前置为0\n        let match,index; // 每次匹配到的结果\n\n        while(match = defaultTagRE.exec(text)){\n            index = match.index; // 保存匹配到的索引\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index+match[0].length;\n        }\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction genChildren(el) {\n    const children = el.children;\n    if (children) { // 将所有转化后的儿子用逗号拼接起来\n        return children.map(child => gen(child)).join(',')\n    }\n}\nexport function generate(el) {\n    let children = genChildren(el);// 儿子的生成\n    let code = `_c('${el.tag}',${\n        el.attrs.length? `${genProps(el.attrs)}`:'undefined'\n    }${\n        children?`,${children}`:''\n    })`;\n    return code;\n}\n","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\nexport function compileToFunctions (template) {\n  console.log(template)\n  // return template\n  // 1. 将template转成ast树， 这样做的目的是，用js对象更方便后续操作\n  let ast = parseHTML(template)\n  /* console.log(ast)\n    {\n      attrs: (2) [{…}, {…}]\n      children: (3) [{…}, {…}, {…}]\n      parent: null\n      tag: \"div\"\n      type: 1\n    }\n  */\n  // 2. 优化静态节点\n  // 3. 用ast生成code, 主要是用vue的的方法去包装成code，\n  // 这样在render函数执行时，会用vue原型上的方法去编译render函数\n  let code = generate(ast);\n  // _c('div',{id:\"app\",style:{\"color\":\"red\"}},_c('p',undefined,_v(\"hello world zf\")),_c('li',undefined,_v(_s(school.name))),_c('li',undefined,_v(_s(school.age))))\n  // console.log(code);\n  // 4. 通过new Function + with的方式，生成render函数\n  let render = new Function(`with(this){return ${code}}`)\n  /*\n    with 的用法\n    https://blog.csdn.net/zwkkkk1/article/details/79725934\n  */\n  return render\n}\n","export function patch (oldVnode, vnode) {\n  let el = createElm(vnode)\n  let parentElm = oldVnode.parentNode\n  parentElm.insertBefore(el, oldVnode.nextSibling)\n  parentElm.removeChild(oldVnode)\n}\n\nfunction createElm (vnode) {\n  let {tag,children,key,data,text} = vnode;\n    if(typeof tag == 'string'){ // 创建元素 放到vnode.el上\n        vnode.el = document.createElement(tag);\n        children.forEach(child=>{ // 遍历儿子 将儿子渲染后的结果扔到父亲中\n            vnode.el.appendChild(createElm(child));\n        })\n    }else{ // 创建文件 放到vnode.el上\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}","import { patch } from \"./vdom/patch\";\nexport function lifeCycleMixin (Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this\n    patch(vm.$el, vnode)\n  }\n}\n\nexport function mountComponent (vm, el) {\n  vm._update(vm._render())\n}\n","import { initState } from \"./state\"\nimport { compileToFunctions } from \"./compiler/index\"\nimport { mountComponent } from \"./lifecycle\";\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this // 实例\n    vm.$options = options // 属性挂在实例的$options\n    initState(vm)\n    if(vm.$options.el){\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n    if(!options.render){\n      // 没render 将template转化成render方法\n      let template = options.template;\n      if(!template && el){\n          template = el.outerHTML;\n      }\n      // 编译原理 将模板编译成render函数\n      const render = compileToFunctions(template);\n      options.render = render\n    }\n    // 都解析成render函数之后，挂载组件\n    mountComponent(vm,el);\n  }\n}\n","export function renderMixin (Vue) {\n  Vue.prototype._c = function (){\n    return createElement(...arguments)\n  }\n  Vue.prototype._s = function(val) { // stringify\n    return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n  }\n  Vue.prototype._v = function(text) { // 创建虚拟dom文本元素\n      return createTextVnode(text);\n  }\n  Vue.prototype._render = function (){\n    const vm = this // Vue的实例有_render方法调用_render所以this是vue\n    const render= vm.$options.render // $options挂上了所有得到属性\n    let vnode = render.call(vm)\n    return vnode\n  }\n}\n// _c('div',{},_v(),_c())\nfunction createElement(tag,data={},...children){\n  return vnode(tag,data,data.key,children)\n}\nfunction createTextVnode(text){\n  return vnode(undefined,undefined,undefined,undefined,text);\n}\nfunction vnode(tag,data,key,children,text){\n  return {\n      tag,\n      data,\n      key,\n      children,\n      text\n  }\n}","import { initMixin } from \"./init.js\"\nimport { renderMixin } from \"./vdom/index\";\nimport { lifeCycleMixin } from \"./lifecycle.js\";\n\nfunction Vue (options) {\n  this._init(options)\n}\ninitMixin(Vue)\nlifeCycleMixin(Vue)\nrenderMixin(Vue)\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","val","target","value","enumerable","configurable","oldArrayProtoMethods","Array","prototype","arrayMethods","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","observe","Observer","isArray","__proto__","walk","keys","defineReactive","i","length","newValue","initState","opt","$options","props","initData","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","parent","root","currentParent","stack","start","element","push","end","pop","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","join","genChildren","el","map","child","code","compileToFunctions","template","console","log","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","appendChild","createTextNode","lifeCycleMixin","Vue","_update","$el","mountComponent","_render","initMixin","_init","options","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","_v","createTextVnode","undefined"],"mappings":"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"}